var assert = require('assert')

const connectionConfig = require('../truffle-config.js')
const connection = connectionConfig.networks['geth']
let web3Provider = connection.provider

const Pr000xyArtifact = require('../build/contracts/Pr000xy.json')
const UpgradeableArtifact = require('../build/contracts/AdminUpgradeabilityProxy.json')

async function verifyContractCode(provider) {
  var web3 = provider
  let passed = 0
  let failed = 0
  let gasUsage = {}
  console.log('verifying contract source code...')

  // get available addresses and assign them to various roles
  const addresses = await web3.eth.getAccounts()
  if (addresses.length < 1) {
    console.log('cannot find enough addresses to run tests!')
    process.exit(1)
  }

  let address = addresses[0]
  const originalAddress = addresses[0]

  async function setupNewDefaultAddress(newPrivateKey) {
    const pubKey = await web3.eth.accounts.privateKeyToAccount(newPrivateKey)
    await web3.eth.accounts.wallet.add(pubKey)

    await web3.eth.sendTransaction({
      from: originalAddress,
      to: pubKey.address,
      value: 10 ** 18,
      gas: '0x5208',
      gasPrice: '0x4A817C800'
    })
    address = pubKey.address
  }

  async function raiseGasLimit(necessaryGas) {
    iterations = 9999
    if (necessaryGas > 8000000) {
      console.error('the gas needed is too high!')
      process.exit(1)
    } else if (typeof necessaryGas === 'undefined') {
      iterations = 20
      necessaryGas = 8000000
    }

    // bring up gas limit if necessary by doing additional transactions
    var block = await web3.eth.getBlock("latest");
    while (iterations > 0 && block.gasLimit < necessaryGas) {
      await web3.eth.sendTransaction({
        from: originalAddress,
        to: originalAddress,
        value: '0x01',
        gas: '0x5208',
        gasPrice: '0x4A817C800'
      })
      var block = await web3.eth.getBlock("latest");
      iterations--
    }

    console.log("raising gasLimit, currently at " + block.gasLimit);
    return block.gasLimit
  }

  async function getDeployGas(dataPayload) {
    await web3.eth.estimateGas({
      from: address,
      data: dataPayload
    }).catch(async error => {
      if (
        error.message === (
          'Returned error: gas required exceeds allowance or always failing ' +
          'transaction'
        )
      ) {
        await raiseGasLimit()
        await getDeployGas(dataPayload)
      }
    })

    deployGas = await web3.eth.estimateGas({
      from: address,
      data: dataPayload
    })

    return deployGas
  }

  // *************************** deploy contracts *************************** //
  setupNewDefaultAddress(
    '0xfeedfeedfeedfeedfeedfeedfeedfeedfeedfeedfeedfeedfeedfeedfeedfeed'
  )

  let deployGas;
  let dataPayload;
  let latestBlock = await web3.eth.getBlock('latest')
  const gasLimit = latestBlock.gasLimit

  const Pr000xyDeployer = new web3.eth.Contract(Pr000xyArtifact.abi)

  dataPayload = Pr000xyDeployer.deploy({
    data: Pr000xyArtifact.bytecode,
    arguments: [
      '0x749DA89712DC88284Fc35712c06eAC88Dd749e01',
      UpgradeableArtifact.bytecode
    ]
  }).encodeABI()

  deployGas = await getDeployGas(dataPayload)

  const Pr000xy = await Pr000xyDeployer.deploy({
    data: Pr000xyArtifact.bytecode,
    arguments: [
      '0x749DA89712DC88284Fc35712c06eAC88Dd749e01',
      UpgradeableArtifact.bytecode
    ]
  }).send({
    from: address,
    gas: deployGas,
    gasPrice: 10 ** 1
  }).catch(error => {
    console.error(error)
    console.log(
      ` ✘ Pr000xy contract deploys successfully for ${deployGas} gas`
    )
    failed++
    process.exit(1)
  })

  console.log(
    ` ✓ Pr000xy contract deploys successfully for ${deployGas} gas`
  )
  passed++

  ropstenCode = '0x6080604052600436106101bb5760003560e01c80156101c057806306fdde03146101d7578063095ea7b3146102615780630d28495f146102bb57806315694ec9146102f9578063158ef93e1461032957806318160ddd1461033e5780631dfd97d61461036557806322b413e51461041057806323b872dd1461045657806324d7806c146104a657806329a5c5cf146104e65780632a196e5714610510578063313ce567146105df57806336a290de1461060a5780633933ab5a14610634578063395093511461066a5780634490225a146106b05780634579268a146106f6578063469754091461078c578063538a8b0c14610859578063546cd82c146109085780635c4277a214610932578063643d7bc914610947578063666d950b146109aa5780636a19e6de146109da57806370a0823114610a0a5780638129fc1c14610a4a57806395d89b4114610a5f578063a457c2d714610a74578063a6261a3414610aba578063a8fbc35814610acf578063a9059cbb14610b28578063c00007b014610b6e578063dd62ed3e14610bae578063ef706adf14610bf6578063f1031b0314610c20578063f631a55114610cca578063f97fc6e214610cf4575b600080fd5b3480156101cc57600080fd5b506101d5610d09565b005b3480156101e357600080fd5b506101ec610e1f565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561022657818101518382015260200161020e565b50505050905090810190601f1680156102535780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561026d57600080fd5b506102a76004803603604081101561028457600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135610eb6565b604080519115158252519081900360200190f35b3480156102c757600080fd5b506102d0610f4f565b6040805173ffffffffffffffffffffffffffffffffffffffff9092168252519081900360200190f35b34801561030557600080fd5b506101d56004803603604081101561031c57600080fd5b5080359060200135610f71565b34801561033557600080fd5b506102a761120e565b34801561034a57600080fd5b5061035361121c565b60408051918252519081900360200190f35b34801561037157600080fd5b506101d56004803603608081101561038857600080fd5b73ffffffffffffffffffffffffffffffffffffffff823581169260208101358216926040820135909216918101906080810160608201356401000000008111156103d157600080fd5b8201836020820111156103e357600080fd5b8035906020019184600183028401116401000000008311171561040557600080fd5b509092509050611222565b34801561041c57600080fd5b506101d56004803603604081101561043357600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135611387565b34801561046257600080fd5b506102a76004803603606081101561047957600080fd5b5073ffffffffffffffffffffffffffffffffffffffff813581169160208101359091169060400135611595565b3480156104b257600080fd5b506102a7600480360360208110156104c957600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16611686565b3480156104f257600080fd5b506102d06004803603602081101561050957600080fd5b5035611699565b34801561051c57600080fd5b506101d56004803603604081101561053357600080fd5b81019060208101813564010000000081111561054e57600080fd5b82018360208201111561056057600080fd5b8035906020019184602083028401116401000000008311171561058257600080fd5b9193909290916020810190356401000000008111156105a057600080fd5b8201836020820111156105b257600080fd5b803590602001918460208302840111640100000000831117156105d457600080fd5b5090925090506117ed565b3480156105eb57600080fd5b506105f4611a39565b6040805160ff9092168252519081900360200190f35b34801561061657600080fd5b506102d06004803603602081101561062d57600080fd5b5035611a42565b34801561064057600080fd5b506102d06004803603606081101561065757600080fd5b5080359060208101359060400135611a62565b34801561067657600080fd5b506102a76004803603604081101561068d57600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135611ab1565b3480156106bc57600080fd5b506102a7600480360360408110156106d357600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135611b88565b34801561070257600080fd5b506107206004803603602081101561071957600080fd5b5035611d4d565b6040805196875260208701959095527fffffffffffffffffffffffffffffffffffffffff0000000000000000000000009093168585015273ffffffffffffffffffffffffffffffffffffffff9182166060860152811660808501521660a0830152519081900360c00190f35b34801561079857600080fd5b50610809600480360360208110156107af57600080fd5b8101906020810181356401000000008111156107ca57600080fd5b8201836020820111156107dc57600080fd5b803590602001918460208302840111640100000000831117156107fe57600080fd5b509092509050611ee7565b60408051602080825283518183015283519192839290830191858101910280838360005b8381101561084557818101518382015260200161082d565b505050509050019250505060405180910390f35b34801561086557600080fd5b506102d0600480360360a081101561087c57600080fd5b81359160208101359173ffffffffffffffffffffffffffffffffffffffff604083013581169260608101359091169181019060a0810160808201356401000000008111156108c957600080fd5b8201836020820111156108db57600080fd5b803590602001918460018302840111640100000000831117156108fd57600080fd5b509092509050612004565b34801561091457600080fd5b506103536004803603602081101561092b57600080fd5b5035612140565b34801561093e57600080fd5b506101ec61233b565b6103536004803603606081101561095d57600080fd5b507fffffffffffffffffffffffffffffffffffffffff0000000000000000000000008135169073ffffffffffffffffffffffffffffffffffffffff6020820135811691604001351661239c565b3480156109b657600080fd5b50610353600480360360408110156109cd57600080fd5b5080359060200135612753565b3480156109e657600080fd5b50610353600480360360408110156109fd57600080fd5b5080359060200135612770565b348015610a1657600080fd5b5061035360048036036020811015610a2d57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff1661277c565b348015610a5657600080fd5b506101d56127a4565b348015610a6b57600080fd5b506101ec6129c7565b348015610a8057600080fd5b506102a760048036036040811015610a9757600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135612a28565b348015610ac657600080fd5b50610353612a8d565b348015610adb57600080fd5b50610b0f60048036036020811015610af257600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16612a93565b6040805192835260208301919091528051918290030190f35b348015610b3457600080fd5b506102a760048036036040811015610b4b57600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135612aa8565b348015610b7a57600080fd5b5061035360048036036020811015610b9157600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16612abe565b348015610bba57600080fd5b5061035360048036036040811015610bd157600080fd5b5073ffffffffffffffffffffffffffffffffffffffff81358116916020013516612ac9565b348015610c0257600080fd5b506101d560048036036020811015610c1957600080fd5b5035612b01565b348015610c2c57600080fd5b506102d060048036036080811015610c4357600080fd5b81359173ffffffffffffffffffffffffffffffffffffffff602082013581169260408301359091169190810190608081016060820135640100000000811115610c8b57600080fd5b820183602082011115610c9d57600080fd5b80359060200191846001830284011164010000000083111715610cbf57600080fd5b509092509050612d72565b348015610cd657600080fd5b5061035360048036036020811015610ced57600080fd5b5035612f46565b348015610d0057600080fd5b50610353613011565b60068054604080516020601f600260001961010060018816150201909516949094049384018190048102820181019092528281526000938493606093830182828015610d965780601f10610d6b57610100808354040283529160200191610d96565b820191906000526020600020905b815481529060010190602001808311610d7957829003601f168201915b50508351939450506020840192915050600c7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36010460005b81811015610e0357600c81026004013560a01c3360601b0183856000f59550610df786613017565b90960195600101610dcf565b506000861115610e1757610e173387613149565b505050505050565b60038054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815260609390929091830182828015610eab5780601f10610e8057610100808354040283529160200191610eab565b820191906000526020600020905b815481529060010190602001808311610e8e57829003601f168201915b505050505090505b90565b600073ffffffffffffffffffffffffffffffffffffffff83161515610eda57600080fd5b33600081815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff881680855290835292819020869055805186815290519293927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a35060015b92915050565b60055462010000900473ffffffffffffffffffffffffffffffffffffffff1690565b6000818152600b6020526040902054819060ff16151561101857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603660248201527f4e6f206f6666657220666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e206f666665722049442e00000000000000000000606482015290519081900360840190fd5b82606081901c73ffffffffffffffffffffffffffffffffffffffff1633146110ed57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604560248201527f496e76616c69642073616c74202d206669727374203230206279746573206f6660448201527f207468652073616c74206d757374206d617463682063616c6c696e672061646460648201527f726573732e000000000000000000000000000000000000000000000000000000608482015290519081900360a40190fd5b6110f561545a565b6000848152600b60205260409020600101546111109061321a565b905061111f81604001516134c4565b60068054604080516020601f600260001961010060018816150201909516949094049384018190048102820181019092528281526000936111b7938a938301828280156111ad5780601f10611182576101008083540402835291602001916111ad565b820191906000526020600020905b81548152906001019060200180831161119057829003601f168201915b5050505050613563565b90506111c281613579565b6111d58183606001518460800151613623565b60006111e0826136c6565b90506111ec82826136e2565b6111fb8360a001518383613746565b61120582846137ae565b50505050505050565b600554610100900460ff1681565b60025490565b73ffffffffffffffffffffffffffffffffffffffff85166000908152600a6020526040902054859060ff1615156112e057604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603560248201527f4e6f2070726f787920666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e20616464726573732e0000000000000000000000606482015290519081900360840190fd5b6000806112ec88613869565b73ffffffffffffffffffffffffffffffffffffffff8a166000908152600a602052604090206001015491935091506113258383836138ed565b5061136889888a89898080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250613b3492505050565b61137c338a6113778686613e23565b613746565b505050505050505050565b73ffffffffffffffffffffffffffffffffffffffff82166000908152600a6020526040902054829060ff16151561144557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603560248201527f4e6f2070726f787920666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e20616464726573732e0000000000000000000000606482015290519081900360840190fd5b6000828152600b6020526040902054829060ff1615156114ec57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603660248201527f4e6f206f6666657220666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e206f666665722049442e00000000000000000000606482015290519081900360840190fd5b6114f461545a565b6000848152600b602052604090206001015461150f9061321a565b905061151e81604001516134c4565b6115318582606001518360800151613623565b60008061153d87613869565b915091506115548360a00151886113778585613e23565b73ffffffffffffffffffffffffffffffffffffffff87166000908152600a602052604090206001015461158a90839083906138ed565b5061120587846137ae565b73ffffffffffffffffffffffffffffffffffffffff831660009081526001602090815260408083203384529091528120546115d6908363ffffffff613e5716565b73ffffffffffffffffffffffffffffffffffffffff85166000908152600160209081526040808320338452909152902055611612848484613e6c565b73ffffffffffffffffffffffffffffffffffffffff84166000818152600160209081526040808320338085529083529281902054815190815290519293927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a35060015b9392505050565b600061169182613f6d565b90505b919050565b600081606081901c73ffffffffffffffffffffffffffffffffffffffff16331461177057604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604560248201527f496e76616c69642073616c74202d206669727374203230206279746573206f6660448201527f207468652073616c74206d757374206d617463682063616c6c696e672061646460648201527f726573732e000000000000000000000000000000000000000000000000000000608482015290519081900360a40190fd5b6006805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181526117d3938793919290918301828280156111ad5780601f10611182576101008083540402835291602001916111ad565b91506117de82613579565b6117e7826140cb565b50919050565b6117f561545a565b6000806000805b87811015611a1b573389898381811061181157fe5b9050602002013560601c73ffffffffffffffffffffffffffffffffffffffff1614151561183d57611a13565b808611801561185f575086868281811061185357fe5b90506020020135600014155b915081156119f4576009600b600089898581811061187957fe5b9050602002013581526020019081526020016000206001015481548110151561189e57fe5b60009182526020918290206040805160e08101825260079093029091018054835260018101549383019390935260028301549082015260038201547fffffffffffffffffffffffffffffffffffffffff000000000000000000000000606091821b1690820152600482015473ffffffffffffffffffffffffffffffffffffffff90811660808301526005830154811660a083015260069092015490911660c0820152945061195e858a8a8481811061195257fe5b905060200201356141ac565b1561196857611a13565b6119df89898381811061197757fe5b60068054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815293810295909501359492935090918301828280156111ad5780601f10611182576101008083540402835291602001916111ad565b92506119eb83866142b9565b84019350611a13565b611a0389898381811061197757fe5b9250611a0e83613017565b840193505b6001016117fc565b506000831115611a2f57611a2f3384613149565b5050505050505050565b60055460ff1690565b600080611a4e8361434c565b909250905080156117e75750600092915050565b60008381526008602090815260408083208584529091528120805483908110611a8757fe5b60009182526020909120015473ffffffffffffffffffffffffffffffffffffffff16949350505050565b600073ffffffffffffffffffffffffffffffffffffffff83161515611ad557600080fd5b33600090815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff87168452909152902054611b16908363ffffffff6143c816565b33600081815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff89168085529083529281902085905580519485525191937f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929081900390910190a350600192915050565b6000818152600b602052604081205460ff161515611c2d57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603660248201527f4e6f206f6666657220666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e206f666665722049442e00000000000000000000606482015290519081900360840190fd5b611c3561545a565b6000838152600b6020526040902060010154600980549091908110611c5657fe5b60009182526020918290206040805160e081018252600790930290910180548352600181015493830193909352600283015490820181905260038301547fffffffffffffffffffffffffffffffffffffffff000000000000000000000000606091821b1690830152600483015473ffffffffffffffffffffffffffffffffffffffff90811660808401526005840154811660a084015260069093015490921660c082015291501580611d0b5750428160400151115b8015611d2b5750611d1b846136c6565b611d288260a0015161277c565b10155b8015611d455750611d4584826060015183608001516143da565b949350505050565b6000818152600b60205260408120548190819081908190819060ff161515611dfc57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603660248201527f4e6f206f6666657220666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e206f666665722049442e00000000000000000000606482015290519081900360840190fd5b611e0461545a565b6000888152600b6020526040902060010154600980549091908110611e2557fe5b60009182526020918290206040805160e08101825260079390930290910180548352600181015493830184905260028101549183018290526003810154606090811b7fffffffffffffffffffffffffffffffffffffffff00000000000000000000000016908401819052600482015473ffffffffffffffffffffffffffffffffffffffff908116608086018190526005840154821660a0870181905260069094015490911660c0909501859052949d929c509a50929850919650945092505050565b60608083839050604051908082528060200260200182016040528015611f17578160200160208202803883390190505b5090506000806000805b86811015611fe55733888883818110611f3657fe5b9050602002013560601c73ffffffffffffffffffffffffffffffffffffffff16141515611f6257611fdd565b611f7d888883818110611f7157fe5b9050602002013561434c565b9250508115611f8b57611fdd565b611f9a88888381811061197757fe5b9250611fa583613017565b84019350828582815181101515611fb857fe5b73ffffffffffffffffffffffffffffffffffffffff9092166020928302909101909101525b600101611f21565b506000831115611ff957611ff93384613149565b509195945050505050565b60008681526008602090815260408083208884529091528120548181116120d857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604260248201527f4e6f2070726f7869657320666f756e64207468617420636f72726573706f6e6460448201527f20746f2074686520676976656e207a65726f206279746520617267756d656e7460648201527f732e000000000000000000000000000000000000000000000000000000000000608482015290519081900360a40190fd5b6120e28888614686565b915061212682868887878080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250613b3492505050565b61213533836113778b8b613e23565b509695505050505050565b6000818152600b6020526040812054829060ff1615156121e757604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603660248201527f4e6f206f6666657220666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e206f666665722049442e00000000000000000000606482015290519081900360840190fd5b6000838152600b602052604090206001015461220281614800565b600980548290811061221057fe5b90600052602060002090600702016002015460001415156122b857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602560248201527f4f666665722068617320616c7265616479206265656e2073657420746f20657860448201527f706972652e000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b4262015180019250826009828154811015156122d057fe5b9060005260206000209060070201600201819055503373ffffffffffffffffffffffffffffffffffffffff16847f2723633241a6509a223e965268e029c39947f84abbd4bfb672efd0cfd8381cda856040518082815260200191505060405180910390a35050919050565b60068054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815260609390929091830182828015610eab5780601f10610e8057610100808354040283529160200191610eab565b60006123a884846148cd565b600073ffffffffffffffffffffffffffffffffffffffff8316156123cc57826123ce565b335b6009546040805133606090811b6020808401919091523460348401527fffffffffffffffffffffffffffffffffffffffff0000000000000000000000008b16605484015273ffffffffffffffffffffffffffffffffffffffff808b16831b6068850152861690911b607c830152600019430140609083015260b0808301949094528251808303909401845260d0909101909152815191012060001c925090505b6000828152600b602052604090205460ff16156124b65781604051602001808281526020019150506040516020818303038152906040528051906020012060001c915061246e565b6124be61545a565b60e06040519081016040528084815260200134815260200160008152602001876bffffffffffffffffffffffff191681526020018673ffffffffffffffffffffffffffffffffffffffff1681526020013373ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1681525090506040805190810160405280600115158152602001600980549050815250600b600085815260200190815260200160002060008201518160000160006101000a81548160ff021916908315150217905550602082015181600101559050506009819080600181540180825580915050906001820390600052602060002090600702016000909192909190915060008201518160000155602082015181600101556040820151816002015560608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908360601c021790555060808201518160040160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060a08201518160050160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060c08201518160060160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050503373ffffffffffffffffffffffffffffffffffffffff16837fb61c892d3af89c520a4214d8f8dc61896cdb6fd28991a0a836288fe73028a18c346040518082815260200191505060405180910390a350509392505050565b600091825260086020908152604080842092845291905290205490565b600061167f8383613e23565b73ffffffffffffffffffffffffffffffffffffffff1660009081526020819052604090205490565b600554610100900460ff161561284157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f436f6e74726163742068617320616c7265616479206265656e20696e6974696160448201527f6c697a65642e0000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600d5474010000000000000000000000000000000000000000900462ffffff165b6101a58162ffffff1610801561287957506175305a115b1561293d57600d54604080517f9af5b7ca00000000000000000000000000000000000000000000000000000000815262ffffff84166004820152905173ffffffffffffffffffffffffffffffffffffffff90921691639af5b7ca91602480820192602092909190829003018186803b1580156128f457600080fd5b505afa158015612908573d6000803e3d6000fd5b505050506040513d602081101561291e57600080fd5b505162ffffff82166000908152600c6020526040902055600101612862565b600d80547fffffffffffffffffff000000ffffffffffffffffffffffffffffffffffffffff167401000000000000000000000000000000000000000062ffffff84811682029290921792839055909104166101a514156129c457600580547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff166101001790555b50565b60048054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815260609390929091830182828015610eab5780601f10610e8057610100808354040283529160200191610eab565b600073ffffffffffffffffffffffffffffffffffffffff83161515612a4c57600080fd5b33600090815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff87168452909152902054611b16908363ffffffff613e5716565b60075490565b600080612a9f83613869565b91509150915091565b6000612ab5338484613e6c565b50600192915050565b6000611691826136c6565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260016020908152604080832093909416825291909152205490565b6000818152600b6020526040902054819060ff161515612ba857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603660248201527f4e6f206f6666657220666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e206f666665722049442e00000000000000000000606482015290519081900360840190fd5b6000828152600b6020526040902060010154612bc381614800565b6009805482908110612bd157fe5b906000526020600020906007020160020154600014151515612c7a57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602160248201527f4f6666657220686173206e6f74206265656e2073657420746f2065787069726560448201527f2e00000000000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b42600982815481101515612c8a57fe5b906000526020600020906007020160020154101515612d0a57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601a60248201527f4f6666657220686173206e6f742079657420657870697265642e000000000000604482015290519081900360640190fd5b612d1261545a565b612d1b8261321a565b90508060a0015173ffffffffffffffffffffffffffffffffffffffff166108fc82602001519081150290604051600060405180830381858888f19350505050158015612d6b573d6000803e3d6000fd5b5050505050565b600085606081901c73ffffffffffffffffffffffffffffffffffffffff163314612e4957604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604560248201527f496e76616c69642073616c74202d206669727374203230206279746573206f6660448201527f207468652073616c74206d757374206d617463682063616c6c696e672061646460648201527f726573732e000000000000000000000000000000000000000000000000000000608482015290519081900360a40190fd5b6006805460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152612eac938b93919290918301828280156111ad5780601f10611182576101008083540402835291602001916111ad565b9150612ef082868887878080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250613b3492505050565b6040805173ffffffffffffffffffffffffffffffffffffffff84168152905133917f248d4c7df80ec9cf19a5f46b7b1e595c1d3abd7c11c8023abad73aad50a4e13c919081900360200190a25095945050505050565b6000600982815481101515612f5757fe5b60009182526020808320600790920290910154808352600b90915260409091205490915060ff16151561169457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603660248201527f4e6f206f6666657220666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e206f666665722049442e00000000000000000000606482015290519081900360840190fd5b60095490565b600080600061302584613869565b6040805180820182526001808252600085815260086020908152848220868352808252858320805483870190815273ffffffffffffffffffffffffffffffffffffffff8e16808652600a8552978520965187547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169015151787555195850195909555815283549283018455928152919091200180547fffffffffffffffffffffffff000000000000000000000000000000000000000016909117905590925090506130f18282613e23565b6040805173ffffffffffffffffffffffffffffffffffffffff871681529051919450849133917ff80e82c0ffa5a1363742cd76e82c6263b7446b6bc6de02a20df7305579a31a03919081900360200190a35050919050565b73ffffffffffffffffffffffffffffffffffffffff8216151561316b57600080fd5b60025461317e908263ffffffff6143c816565b60025573ffffffffffffffffffffffffffffffffffffffff82166000908152602081905260409020546131b7908263ffffffff6143c816565b73ffffffffffffffffffffffffffffffffffffffff83166000818152602081815260408083209490945583518581529351929391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35050565b61322261545a565b600980548390811061323057fe5b60009182526020918290206040805160e08101825260079093029091018054835260018101549383019390935260028301549082015260038201547fffffffffffffffffffffffffffffffffffffffff000000000000000000000000606091821b1690820152600482015473ffffffffffffffffffffffffffffffffffffffff90811660808301526005830154811660a083015260069092015490911660c082015290506132dc61545a565b6009805460001981019081106132ee57fe5b60009182526020918290206040805160e08101825260079093029091018054835260018101549383019390935260028301549082015260038201547fffffffffffffffffffffffffffffffffffffffff000000000000000000000000606091821b1690820152600482015473ffffffffffffffffffffffffffffffffffffffff90811660808301526005830154811660a083015260069092015490911660c0820152600980549192508291859081106133a357fe5b6000918252602080832084516007909302019182558381015160018084019190915560408086015160028501556060808701516003860180549190921c7fffffffffffffffffffffffff000000000000000000000000000000000000000091821617909155608087015160048601805473ffffffffffffffffffffffffffffffffffffffff92831690841617905560a088015160058701805491831691841691909117905560c090970151600690950180549590971694169390931790945584518352600b90529020018390556009805490613483906000198301615496565b505080516000908152600b6020526040812080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016815560010155919050565b8015806134d057504281115b15156129c457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602960248201527f4f6666657220686173206578706972656420616e64206973206e6f206c6f6e6760448201527f65722076616c69642e0000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600081602001825184818334f595945050505050565b73ffffffffffffffffffffffffffffffffffffffff811615156129c457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603e60248201527f4661696c656420746f206465706c6f7920616e207570677261646561626c652060448201527f70726f7879207573696e67207468652070726f76696465642073616c742e0000606482015290519081900360840190fd5b61362e8383836143da565b15156136c157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602481018290527f50726f787920646f6573206e6f7420636f6e666f726d20746f2074686520636f60448201527f6e73747261696e7473206f66207468652070726f7669646564206f666665722e606482015290519081900360840190fd5b505050565b60008060006136d484613869565b91509150611d458282613e23565b60008111156136f5576136f53382613149565b6040805173ffffffffffffffffffffffffffffffffffffffff841681529051829133917ff80e82c0ffa5a1363742cd76e82c6263b7446b6bc6de02a20df7305579a31a039181900360200190a35050565b6000811115613759576137598382614a5f565b6040805173ffffffffffffffffffffffffffffffffffffffff8481168252915183928616917f69dc50ce7c4c897f6abfaf1a6537285281e7d878e75856d689c72798efc5472d919081900360200190a3505050565b6137cf8260008360c001516020604051908101604052806000815250613b34565b60008160200151111561380e576020810151604051339180156108fc02916000818181858888f1935050505015801561380c573d6000803e3d6000fd5b505b60a081015181516020808401516040805191825251339473ffffffffffffffffffffffffffffffffffffffff1693927f163f73e2bfce8d9afeded2c0640d10ee29e177f3f7acbf000fdd85380e598e3a928290030190a45050565b600080606083901b6001825b60148110156138d75782816014811061388a57fe5b1a60f81b7fff000000000000000000000000000000000000000000000000000000000000001615156138c1576001909301926138cf565b81156138cf57809450600091505b600101613875565b5082601414156138e657601493505b5050915091565b600083815260086020908152604080832085845290915281205482811161399b57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603760248201527f4e6f2070726f787920666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e20617267756d656e74732e000000000000000000606482015290519081900360840190fd5b600085815260086020908152604080832087845290915290208054849081106139c057fe5b6000918252602080832090910154878352600882526040808420888552909252908220805473ffffffffffffffffffffffffffffffffffffffff9092169450906000198401908110613a0e57fe5b60009182526020808320909101548883526008825260408084208985529092529120805473ffffffffffffffffffffffffffffffffffffffff9092169250829186908110613a5857fe5b600091825260208083209190910180547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff9485161790559183168152600a825260408082206001018790558882526008835280822088835290925220805490613adb9060001983016154c2565b50505073ffffffffffffffffffffffffffffffffffffffff81166000908152600a6020526040812080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00168155600101559392505050565b8373ffffffffffffffffffffffffffffffffffffffff841615613cea57600082511115613c5257604080517f4f1ef28600000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff868116600483019081526024830193845285516044840152855191851693634f1ef2869389938893929160640190602085019080838360005b83811015613be8578181015183820152602001613bd0565b50505050905090810190601f168015613c155780820380516001836020036101000a031916815260200191505b509350505050600060405180830381600087803b158015613c3557600080fd5b505af1158015613c49573d6000803e3d6000fd5b50505050613cea565b8073ffffffffffffffffffffffffffffffffffffffff16633659cfe6856040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b158015613cd157600080fd5b505af1158015613ce5573d6000803e3d6000fd5b505050505b73ffffffffffffffffffffffffffffffffffffffff831615613da2578073ffffffffffffffffffffffffffffffffffffffff16638f283970846040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b158015613d8557600080fd5b505af1158015613d99573d6000803e3d6000fd5b50505050612d6b565b604080517f8f283970000000000000000000000000000000000000000000000000000000008152336004820152905173ffffffffffffffffffffffffffffffffffffffff831691638f28397091602480830192600092919082900301818387803b158015613e0f57600080fd5b505af115801561137c573d6000803e3d6000fd5b60006002821115613e4e575062ffffff601483028201166000908152600c6020526040902054610f49565b50600092915050565b600082821115613e6657600080fd5b50900390565b73ffffffffffffffffffffffffffffffffffffffff82161515613e8e57600080fd5b73ffffffffffffffffffffffffffffffffffffffff8316600090815260208190526040902054613ec4908263ffffffff613e5716565b73ffffffffffffffffffffffffffffffffffffffff8085166000908152602081905260408082209390935590841681522054613f06908263ffffffff6143c816565b73ffffffffffffffffffffffffffffffffffffffff8084166000818152602081815260409182902094909455805185815290519193928716927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a3505050565b60408051600481526024810182526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167ff851a4400000000000000000000000000000000000000000000000000000000017815291518151600093849360609373ffffffffffffffffffffffffffffffffffffffff881693919290918291908083835b6020831061402f57805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101613ff2565b6001836020036101000a038019825116818451168082178552505050505050905001915050600060405180830381855afa9150503d806000811461408f576040519150601f19603f3d011682016040523d82523d6000602084013e614094565b606091505b509150915081156140c4576020015173ffffffffffffffffffffffffffffffffffffffff16301491506116949050565b5050919050565b6000806140d783613869565b6040805180820182526001808252600085815260086020908152848220868352808252858320805483870190815273ffffffffffffffffffffffffffffffffffffffff8d16808652600a8552978520965187547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169015151787555195850195909555815283549283018455928152919091200180547fffffffffffffffffffffffff000000000000000000000000000000000000000016909117905590925090506136c1836141a78484613e23565b6136e2565b60008060008073ffffffffffffffffffffffffffffffffffffffff168560c0015173ffffffffffffffffffffffffffffffffffffffff1614806142015750604085015115801590614201575042856040015111155b1561421157600192505050610f49565b61421a8461434c565b9092509050600061422a836136c6565b905061423f83876060015188608001516143da565b15806142565750806142548760a0015161277c565b105b156142675760019350505050610f49565b81156142b05785516000908152600b602052604090206001015461428a9061321a565b5061429a8660a001518483613746565b6142a483876137ae565b60019350505050610f49565b50505092915050565b60006142c4836136c6565b6040805173ffffffffffffffffffffffffffffffffffffffff861681529051919250829133917ff80e82c0ffa5a1363742cd76e82c6263b7446b6bc6de02a20df7305579a31a03919081900360200190a381516000908152600b60205260409020600101546143329061321a565b506143428260a001518483613746565b610f4983836137ae565b600754604080517fff000000000000000000000000000000000000000000000000000000000000006020808301919091523060601b6021830152603582018590526055808301949094528251808303909401845260759091019091528151910120600090811c90813b818111156143c257600191505b50915091565b60008282018381101561167f57600080fd5b6000606084811b9083901b601060ff83851a60f890811b901c600f8116900316048380808080806144096154e6565b6144128e614b2f565b905060005b6014811015614671578d816014811061442c57fe5b1a60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166000141561445f57614669565b60108b826014811061446d57fe5b1a60f81b60f81c60ff1681151561448057fe5b0696506010878c836014811061449257fe5b1a60f81b60f81c0360ff168115156144a657fe5b04975060108e82601481106144b757fe5b1a60f81b60f81c60ff168115156144ca57fe5b0694506010858f83601481106144dc57fe5b1a60f81b60f81c0360ff168115156144f057fe5b04955060108a826014811061450157fe5b1a60f81b60f81c60ff1681151561451457fe5b0692506010838b836014811061452657fe5b1a60f81b60f81c0360ff1681151561453a57fe5b04935061455c8883600284026028811061455057fe5b60200201518887614cef565b15156145ea57600060108c60001984016014811061457657fe5b1a60f81b60f81c60ff1681151561458957fe5b0690506145cd8984600285026028811061459f57fe5b60200201518984876000196002890201602881106145b957fe5b60200201518f8960005b6020020151614e9a565b15156145e85760009c5050505050505050505050505061167f565b505b61460c8783600160028502016028811061460057fe5b60200201518786614cef565b158015614650575061464e8783600160028502016028811061462a57fe5b6020020151878b86600287026028811061464057fe5b60200201518e8860006145c3565b155b156146695760009b50505050505050505050505061167f565b600101614417565b5060019e9d5050505050505050505050505050565b600082815260086020908152604080832084845290915281205481811161473457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603760248201527f4e6f2070726f787920666f756e64207468617420636f72726573706f6e64732060448201527f746f2074686520676976656e20617267756d656e74732e000000000000000000606482015290519081900360840190fd5b600084815260086020908152604080832086845290915290208054600019830190811061475d57fe5b60009182526020808320909101548683526008825260408084208785529092529120805473ffffffffffffffffffffffffffffffffffffffff90921693506147a99060001983016154c2565b505073ffffffffffffffffffffffffffffffffffffffff81166000908152600a6020526040812080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001681556001015592915050565b600980543391908390811061481157fe5b600091825260209091206005600790920201015473ffffffffffffffffffffffffffffffffffffffff16146129c457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603c60248201527f4f6e6c7920746865206f726967696e61746f72206f6620746865206f6666657260448201527f206d617920706572666f726d2074686973206f7065726174696f6e2e00000000606482015290519081900360840190fd5b6149076010808460001a60f81b60f81c60ff168115156148e957fe5b068460001a60f81b60f81c0360ff1681151561490157fe5b04614f2f565b606081901b6000808080805b6014811015611a2f5787816014811061492857fe5b1a60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166000141561495b57614a57565b601088826014811061496957fe5b1a60f81b60f81c60ff1681151561497c57fe5b06935060108489836014811061498e57fe5b1a60f81b60f81c0360ff168115156149a257fe5b04945060108682601481106149b357fe5b1a60f81b60f81c60ff168115156149c657fe5b0691506010828783601481106149d857fe5b1a60f81b60f81c0360ff168115156149ec57fe5b04925060018560ff161115614a2357614a058584614ff2565b614a0f858461509c565b614a198584615151565b614a238584615215565b60018460ff161115614a5757614a398483614ff2565b614a43848361509c565b614a4d8483615151565b614a578483615215565b600101614913565b73ffffffffffffffffffffffffffffffffffffffff82161515614a8157600080fd5b600254614a94908263ffffffff613e5716565b60025573ffffffffffffffffffffffffffffffffffffffff8216600090815260208190526040902054614acd908263ffffffff613e5716565b73ffffffffffffffffffffffffffffffffffffffff8316600081815260208181526040808320949094558351858152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a35050565b614b376154e6565b606082901b6000614b478261531b565b6040516020018082805190602001908083835b60208310614b9757805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101614b5a565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405160208183030381529060405280519060200120905060008060008060005b6014811015614ce3576010878260148110614bf457fe5b1a60f81b60f81c60ff16811515614c0757fe5b069350601084888360148110614c1957fe5b1a60f81b60f81c0360ff16811515614c2d57fe5b0494506010868260208110614c3e57fe5b1a60f81b60f81c60ff16811515614c5157fe5b069150601082878360208110614c6357fe5b1a60f81b60f81c0360ff16811515614c7757fe5b04925060098560ff16118015614c90575060078360ff16115b886002830260288110614c9f57fe5b91151560209092020152600960ff8516118015614cbf575060078260ff16115b886001600284020160288110614cd157fe5b91151560209092020152600101614bdd565b50505050505050919050565b600060ff83161515614d0357506001611d45565b60ff831660011415614d1f578160ff168560ff16149050611d45565b60ff831660021415614d44578160ff168560ff16148015614d3d5750835b9050611d45565b60ff831660031415614d68578160ff168560ff16148015614d3d5750508215611d45565b60ff831660041415614d84578160ff168560ff16109050611d45565b60ff831660051415614da0578160ff168560ff16119050611d45565b60ff831660061415614dd1578160ff168560ff16108015614d3d5750600a8560ff161080614d3d5750839050611d45565b60ff831660071415614e02578160ff168560ff16118015614d3d5750600a8560ff161080614d3d5750839050611d45565b60ff831660081415614e33578160ff168560ff16108015614d3d5750600a8560ff161080614d3d5750508215611d45565b60ff831660091415614e64578160ff168560ff16118015614d3d5750600a8560ff161080614d3d5750508215611d45565b60ff8316600e1415614e7857508215611d45565b60ff8316600f1415611d4557600a8260ff161080614d3d575092949350505050565b600060ff8616600a1415614eb8578460ff168860ff16149050614f24565b60ff8616600b1415614ed4578260ff168860ff16149050614f24565b60ff8616600c1415614eff578460ff168860ff16148015614ef85750831515871515145b9050614f24565b60ff8616600d1415614f24578260ff168860ff16148015614ef8575050851515811515145b979650505050505050565b60ff8116600a1480614f44575060ff8116600b145b80614f52575060ff8116600c145b80614f60575060ff8116600d145b156129c457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f43616e6e6f74207370656369667920707265636564696e67207461726765742060448201527f616761696e737420696e697469616c206368617261637465722e000000000000606482015290519081900360840190fd5b60ff811615806150055750600a8260ff16105b151561509857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f43616e6e6f7420737065636966792074617267657420666f722072656c61746960448201527f7665206f72206e6f2d6d6174636820636f6e646974696f6e732e000000000000606482015290519081900360840190fd5b5050565b600a8160ff161080156150bf575060ff8216600214806150bf575060ff82166003145b1561509857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603660248201527f43616e6e6f74206d617463682075707065722d63617365206f72206c6f77657260448201527f2d6361736520616761696e737420612064696769742e00000000000000000000606482015290519081900360840190fd5b60058260ff16118015615174575060ff821660061480615174575060ff82166008145b80156151835750600b8160ff16105b1561509857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603c60248201527f43616e6e6f7420737065636966792075707065722d63617365206f72206c6f7760448201527f65722d63617365206f6e2064696769742d6f6e6c792072616e67652e00000000606482015290519081900360840190fd5b60038260ff16118015615289575060ff8116158015615252575060ff821660041480615244575060ff82166006145b80615252575060ff82166008145b8061528957508060ff16600f148015615289575060ff82166005148061527b575060ff82166007145b80615289575060ff82166009145b1561509857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603e60248201527f43616e6e6f74207370656369667920612072616e6765207768657265206e6f2060448201527f76616c7565732066616c6c2077697468696e2074686520626f756e64732e0000606482015290519081900360840190fd5b604080516028808252606082810190935282919060208201818038833901905050905060008080805b601481101561544f578060130360080260020a8760601c73ffffffffffffffffffffffffffffffffffffffff1681151561537a57fe5b049350601060ff85160492508260100284039150600a8360ff16106153a05760576153a3565b60305b830160f81b85826002028151811015156153b957fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600a8260ff16106153fb5760576153fe565b60305b820160f81b858260020260010181518110151561541757fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600101615344565b509295945050505050565b6040805160e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c081019190915290565b8154818355818111156136c1576007028160070283600052602060002091820191016136c19190615506565b8154818355818111156136c1576000838152602090206136c191810190830161557d565b610500604051908101604052806028906020820280388339509192915050565b610eb391905b808211156155795760008082556001820181905560028201556003810180547fffffffffffffffffffffffff00000000000000000000000000000000000000009081169091556004820180548216905560058201805482169055600682018054909116905560070161550c565b5090565b610eb391905b80821115615579576000815560010161558356fea165627a7a72305820b01ed4d968f4b18df439bad4602d986083891a7084de2d9f7dde5b9fad6f2f400029'

  code = await web3.eth.getCode(Pr000xy.options.address)

  console.log('\nropsten contract address')
  console.log('0x000000009a9fc3ac5280bA0D3eA852E57DD2ac1b')

  // note that the metadata hash (code[(-36 bytes):(-4 bytes)]) may differ
  console.log('\nropsten metadata hash')
  console.log(ropstenCode.slice(ropstenCode.length - 68, ropstenCode.length - 4))
  console.log('\nlocal metadata hash')
  console.log(code.slice(code.length - 68, code.length - 4))
  console.log()

  if (
    (
      code.slice(0, code.length - 68)
    ) === (
      ropstenCode.slice(0, ropstenCode.length - 68)
    )
  ) {
  console.log(
    ` ✓ Pr000xy contract code matches that found on Ropsten`
  )
    passed++
  } else {
    console.log(
      ` ✘ Pr000xy contract code matches that found on Ropsten`
    )
    failed++
  }

  //console.log(code)

  if (failed > 0) {
    process.exit(1)
  }

  // exit.
  process.exit(0)

}

verifyContractCode(web3Provider)
